(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[892],{397:function(e,s,r){Promise.resolve().then(r.bind(r,4773))},4773:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return l}});var d=r(7437),n=r(2265);function l(){var e,s;let[r,l]=(0,n.useState)(""),[a,c]=(0,n.useState)(!1),[i,t]=(0,n.useState)(null),[o,h]=(0,n.useState)(null),x=async()=>{t(null),h(null);let e=r.trim();if(!e){t("Ingresa un n\xfamero de factura.");return}try{c(!0);let s=await fetch("/api/packing/by-invoice?inv=".concat(encodeURIComponent(e))),r=await s.json();if(!s.ok)throw Error((null==r?void 0:r.error)||"Error consultando factura");h(r.packing)}catch(e){t(e.message||"Error desconocido")}finally{c(!1)}},u=null!==(s=null==o?void 0:null===(e=o.lines)||void 0===e?void 0:e.reduce((e,s)=>e+(s.pounds||0),0))&&void 0!==s?s:0,m=o?new Set(o.lines.map(e=>e.box_no)).size:0;return(0,d.jsxs)("main",{className:"space-y-6",children:[(0,d.jsx)("h1",{className:"text-4xl font-bold",children:"Packing â€” Read only"}),(0,d.jsxs)("section",{className:"p-4 border rounded-xl space-y-3",children:[(0,d.jsx)("label",{className:"block text-sm font-semibold",children:"Buscar por n\xfamero de factura"}),(0,d.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,d.jsx)("input",{className:"border rounded px-3 py-2 w-60",placeholder:"Ej. 1033 A",value:r,onChange:e=>l(e.target.value),onKeyDown:e=>{"Enter"===e.key&&x()}}),(0,d.jsx)("button",{className:"px-4 py-2 rounded bg-black text-white",onClick:x,disabled:a,children:a?"Buscando...":"Buscar"})]}),i&&(0,d.jsx)("div",{className:"text-red-600 text-sm",children:i})]}),o&&(0,d.jsxs)("section",{className:"space-y-4",children:[(0,d.jsx)("div",{className:"p-4 border rounded-xl",children:(0,d.jsxs)("div",{className:"text-sm",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("b",{children:"Client:"})," ",o.header.client_name," (",o.header.client_code,")"]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("b",{children:"Address:"})," ",o.header.address]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("b",{children:"TAX:"})," ",o.header.tax_id]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("b",{children:"Guide:"})," ",o.header.guide||"-"]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("b",{children:"Invoice #:"})," ",o.invoice_no]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("b",{children:"Date:"})," ",o.header.date||"-"]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("b",{children:"Status:"})," ",o.status]})]})}),(0,d.jsx)("div",{className:"overflow-x-auto",children:(0,d.jsxs)("table",{className:"min-w-full border rounded",children:[(0,d.jsx)("thead",{className:"bg-gray-100",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"p-2 border",children:"Box No."}),(0,d.jsx)("th",{className:"p-2 border",children:"Item Name/Producto"}),(0,d.jsx)("th",{className:"p-2 border",children:"FORM"}),(0,d.jsx)("th",{className:"p-2 border",children:"Size/Talla"}),(0,d.jsx)("th",{className:"p-2 border",children:"Box Weight (lbs)"})]})}),(0,d.jsx)("tbody",{children:o.lines.map((e,s)=>{let r=o.lines[s-1],n=r&&r.box_no===e.box_no;return(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"p-2 border",children:n?"MX":e.box_no}),(0,d.jsx)("td",{className:"p-2 border",children:e.description_en}),(0,d.jsx)("td",{className:"p-2 border",children:e.form}),(0,d.jsx)("td",{className:"p-2 border",children:e.size}),(0,d.jsx)("td",{className:"p-2 border text-right",children:e.pounds})]},s)})}),(0,d.jsxs)("tfoot",{children:[(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"p-2 border font-semibold",children:"TOTAL BOXES"}),(0,d.jsx)("td",{className:"p-2 border",colSpan:3}),(0,d.jsx)("td",{className:"p-2 border text-right font-semibold",children:m})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"p-2 border font-semibold",children:"TOTAL LBS"}),(0,d.jsx)("td",{className:"p-2 border",colSpan:3}),(0,d.jsx)("td",{className:"p-2 border text-right font-semibold",children:u})]})]})]})})]})]})}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=397)}),_N_E=e.O()}]);