(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[491],{2915:function(e,r,a){Promise.resolve().then(a.bind(a,7495))},7495:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return i}});var n=a(7437),t=a(2265),s=a(4873),c=a(8778);function i(e){let{params:r}=e,a=r.invoice,i=(0,c.c)(),[l,o]=(0,t.useState)(null),[d,u]=(0,t.useState)(null);return((0,t.useEffect)(()=>{if("admin"!==i){alert("Solo el Administrador puede acceder a pricing."),window.location.href="/";return}(async()=>{try{let e=await (0,s.Z)("/api/packing/by-invoice/".concat(a));e.packing?o(e.packing):u("Packing no encontrado.")}catch(r){var e;u(null!==(e=r.message)&&void 0!==e?e:"Error al cargar packing.")}})()},[a,i]),d)?(0,n.jsx)("main",{className:"p-6 text-red-600",children:d}):l?(0,n.jsxs)("main",{className:"p-8 max-w-4xl mx-auto space-y-6",children:[(0,n.jsx)("a",{href:"/packing/".concat(a,"/view"),className:"px-3 py-1 border rounded",children:"← Regresar"}),(0,n.jsxs)("h1",{className:"text-3xl font-bold",children:["Pricing — Invoice ",a]}),(0,n.jsxs)("div",{className:"text-sm text-gray-600",children:["Cliente: ",(0,n.jsx)("b",{children:l.header.client_name}),(0,n.jsx)("br",{}),"Fecha: ",l.header.date,(0,n.jsx)("br",{}),"AWB: ",l.header.guide]}),(0,n.jsx)("p",{className:"text-sm italic text-gray-500",children:"(Pantalla base — lista para agregar precios, totales y exportaci\xf3n)"}),(0,n.jsxs)("table",{className:"min-w-full border mt-4",children:[(0,n.jsx)("thead",{className:"bg-gray-100",children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:"border p-2",children:"Box"}),(0,n.jsx)("th",{className:"border p-2",children:"Item"}),(0,n.jsx)("th",{className:"border p-2",children:"Form"}),(0,n.jsx)("th",{className:"border p-2",children:"Size"}),(0,n.jsx)("th",{className:"border p-2",children:"Lbs"})]})}),(0,n.jsx)("tbody",{children:l.lines.map((e,r)=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:"border p-2",children:e.box_no}),(0,n.jsx)("td",{className:"border p-2",children:e.description_en}),(0,n.jsx)("td",{className:"border p-2",children:e.form}),(0,n.jsx)("td",{className:"border p-2",children:e.size}),(0,n.jsx)("td",{className:"border p-2 text-right",children:e.pounds})]},r))})]})]}):(0,n.jsx)("main",{className:"p-6",children:"Cargando…"})}},4873:function(e,r,a){"use strict";async function n(e,r){let a=await fetch(e,{credentials:"same-origin",...r});if(!a.ok){let e="";try{e=await a.text()}catch(e){}throw Error(e||"HTTP ".concat(a.status))}return a.json()}a.d(r,{Z:function(){return n}})},8778:function(e,r,a){"use strict";function n(){let e=document.cookie.split("; ").find(e=>e.startsWith("qp_session="));if(!e)return null;try{let r=e.split("=")[1],a=JSON.parse(atob(r)),n=(a.role||a.rol||"").toLowerCase();if("proceso"===n||"facturacion"===n||"admin"===n)return n;return null}catch(e){return null}}a.d(r,{B:function(){return t},c:function(){return n}});let t={startPacking:e=>"proceso"===e||"admin"===e,addBoxes:e=>"proceso"===e||"admin"===e,editBoxes:e=>"proceso"===e||"admin"===e,finalize:e=>"proceso"===e||"admin"===e,pricing:e=>"admin"===e,exportAny:e=>"admin"===e,viewOnly:e=>"facturacion"===e}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=2915)}),_N_E=e.O()}]);