(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{6349:function(e,t,n){Promise.resolve().then(n.bind(n,1193))},6463:function(e,t,n){"use strict";var r=n(1169);n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}})},1193:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(7437),a=n(2265),i=n(6463);function o(){let[e,t]=(0,a.useState)(""),[n,o]=(0,a.useState)(""),s=(0,i.useRouter)(),u=async t=>{var r;t.preventDefault();let a=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:n})}),i={};try{i=await a.json()}catch(e){}if(!a.ok||!i.ok){alert((null==i?void 0:i.error)||"Credenciales inv\xe1lidas");return}let o=String((null===(r=i.user)||void 0===r?void 0:r.role)||"").toLowerCase();console.log("LOGIN OK:",{role:o,user:i.user}),"proceso"===o?s.replace("/packing"):"facturacion"===o?s.replace("/packing/view"):s.replace("/")};return(0,r.jsxs)("main",{style:{maxWidth:520,margin:"40px auto",padding:16},children:[(0,r.jsx)("h1",{style:{fontSize:48,fontWeight:700,marginBottom:24},children:"Sign in"}),(0,r.jsxs)("form",{onSubmit:u,style:{display:"flex",gap:8},children:[(0,r.jsx)("input",{placeholder:"email",value:e,onChange:e=>t(e.target.value),style:{flex:1,padding:10}}),(0,r.jsx)("input",{placeholder:"password",type:"password",value:n,onChange:e=>o(e.target.value),style:{flex:1,padding:10}}),(0,r.jsx)("button",{type:"submit",style:{padding:"10px 16px"},children:"Entrar"})]})]})}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=6349)}),_N_E=e.O()}]);