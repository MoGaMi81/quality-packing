"use strict";(()=>{var e={};e.id=873,e.ids=[873],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},57147:e=>{e.exports=require("fs")},71017:e=>{e.exports=require("path")},19750:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>h,patchFetch:()=>f,requestAsyncStorage:()=>d,routeModule:()=>c,serverHooks:()=>g,staticGenerationAsyncStorage:()=>m});var a={};r.r(a),r.d(a,{POST:()=>p});var s=r(49303),i=r(88716),o=r(60670),n=r(87070),u=r(25774);let l=e=>String(e??"").trim();async function p(e){let t="",r="",a=e.headers.get("content-type")||"";try{if(a.includes("application/json")){let a=await e.json().catch(()=>({}));t=l(a.email||a.username).toLowerCase(),r=l(a.password)}else{let a=await e.formData().catch(()=>null);t=l(a?.get("email")||a?.get("username")).toLowerCase(),r=l(a?.get("password"))}}catch{}if(!t||!r)return n.NextResponse.json({ok:!1,error:"Missing email/password"},{status:400});let s=(await (0,u.z)("users.json",[])).find(e=>String(e.email).toLowerCase()===t&&String(e.password)===r);if(!s)return n.NextResponse.json({ok:!1,error:"Invalid credentials"},{status:401});let i=n.NextResponse.json({ok:!0,user:{email:s.email,role:s.role,name:s.name??""}}),o=JSON.stringify({email:s.email,role:s.role,name:s.name??"",t:Date.now()});return i.cookies.set("qp_session",Buffer.from(o).toString("base64"),{httpOnly:!0,sameSite:"lax",path:"/",maxAge:86400}),i}let c=new s.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/auth/login/route",pathname:"/api/auth/login",filename:"route",bundlePath:"app/api/auth/login/route"},resolvedPagePath:"C:\\Users\\logis\\OneDrive\\Desktop\\Proyecto\\Poyecto Web\\Packing List\\quality-packing\\src\\app\\api\\auth\\login\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:d,staticGenerationAsyncStorage:m,serverHooks:g}=c,h="/api/auth/login/route";function f(){return(0,o.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:m})}},25774:(e,t,r)=>{r.d(t,{N:()=>u,z:()=>n});var a=r(57147),s=r(71017),i=r.n(s);let o=i().join(process.cwd(),"src","data");async function n(e,t){try{let t=i().join(o,e),r=await a.promises.readFile(t,"utf8");return JSON.parse(r)}catch{return t}}async function u(e,t){let r=i().join(o,e);await a.promises.writeFile(r,JSON.stringify(t,null,2),"utf8")}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[948,972],()=>r(19750));module.exports=a})();