"use strict";(()=>{var e={};e.id=349,e.ids=[349],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},57147:e=>{e.exports=require("fs")},71017:e=>{e.exports=require("path")},60392:(e,s,t)=>{t.r(s),t.d(s,{originalPathname:()=>x,patchFetch:()=>_,requestAsyncStorage:()=>f,routeModule:()=>m,serverHooks:()=>g,staticGenerationAsyncStorage:()=>j});var i={};t.r(i),t.d(i,{POST:()=>l});var a=t(49303),n=t(88716),r=t(60670),o=t(87070),p=t(6113),c=t(25774);let u=e=>(e??"").trim(),d=e=>u(e).toUpperCase();async function l(e){let s=await e.json(),t=d(s.code),i=u(s.name_en),a=u(s.scientific_name),n=u(s.size),r=u(s.form)||"W&G";if(!t||!i||!n)return o.NextResponse.json({error:"code, name_en and size are required"},{status:400});let l=await (0,c.z)("species.json",[]),m=await (0,c.z)("sizes.json",[]),f=await (0,c.z)("forms.json",[]),j=await (0,c.z)("species_codes.json",[]);if(j.find(e=>d(e.code)===t))return o.NextResponse.json({error:"Species code already exists"},{status:409});let g=e=>`${d(e.name_en)}|${d(e.scientific_name)}`,x=l.find(e=>g(e)===`${d(i)}|${d(a)}`);x||(x={id:(0,p.randomUUID)(),name_en:i,scientific_name:a,form_default:r},l.push(x));let _=m.find(e=>d(e.name)===d(n));_||(_={id:(0,p.randomUUID)(),name:n},m.push(_));let h=f.find(e=>d(e.name)===d(r));h||(h={id:(0,p.randomUUID)(),name:r},f.push(h));let w={code:t,species_id:x.id,size_id:_.id,form_id:h.id};return j.push(w),await Promise.all([(0,c.N)("species.json",l),(0,c.N)("sizes.json",m),(0,c.N)("forms.json",f),(0,c.N)("species_codes.json",j)]),o.NextResponse.json({ok:!0,map:{code:t},species:{name_en:x.name_en,scientific_name:x.scientific_name},size:{name:_.name},form:{name:h.name}},{status:201})}let m=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/catalogs/species-bundle/route",pathname:"/api/catalogs/species-bundle",filename:"route",bundlePath:"app/api/catalogs/species-bundle/route"},resolvedPagePath:"C:\\Users\\logis\\OneDrive\\Desktop\\Proyecto\\Poyecto Web\\Packing List\\quality-packing\\src\\app\\api\\catalogs\\species-bundle\\route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:f,staticGenerationAsyncStorage:j,serverHooks:g}=m,x="/api/catalogs/species-bundle/route";function _(){return(0,r.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:j})}},25774:(e,s,t)=>{t.d(s,{N:()=>p,z:()=>o});var i=t(57147),a=t(71017),n=t.n(a);let r=n().join(process.cwd(),"src","data");async function o(e,s){try{let s=n().join(r,e),t=await i.promises.readFile(s,"utf8");return JSON.parse(t)}catch{return s}}async function p(e,s){let t=n().join(r,e);await i.promises.writeFile(t,JSON.stringify(s,null,2),"utf8")}}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),i=s.X(0,[948,972],()=>t(60392));module.exports=i})();